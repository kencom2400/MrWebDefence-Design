# 決定が必要な項目リスト

## 1. 機能要件に関する決定事項

### 1.1 シグニチャグループの削除時の動作
- **決定済み**: 
  - ✅ **基本動作**: 適用されているグループの削除はできない
  - ✅ **強制削除オプション**: チェックボックスを入れて強制削除が可能
  - ✅ **強制削除時の動作**: 
    - 利用されているシグニチャグループは削除される
    - 代わりに含まれているシグニチャが個別に登録される（シグニチャ自体は削除されない）
    - 削除履歴を記録

### 1.2 シグニチャ候補の再検証ルール
- **決定済み**: 
  - ✅ **検証バッチ**: 毎日決まった時間に動作
  - ✅ **検証対象**: 候補に入っていれば毎日検証される
  - ✅ **再検証の判定基準**: 再検証での判定基準は、1回目の基準と変わらない
  - ✅ **再検証で良好な結果が出た場合の自動承認**: 自動承認はしない。サービス管理者の承認が必要
  - ✅ **30日経過後の処理**: 自動削除
  - ✅ **検証バッチの実行時間帯**: 毎日2時（JST）に実行される（デフォルト）
    - 管理画面上でサービス管理者・サービス管理メンバーが設定可能
- **決定が必要**:
  - [ ] シグニチャ検証ルールの詳細（誤検知率、検知率の閾値等の具体的な基準）
    - 注: 再検証の判定基準は1回目と同じだが、具体的な検証ルールの詳細は要検討

### 1.3 ログ検索機能の詳細
- **決定**: 後で決定
- **現状**: ファイルベースの検索API（grepベース）と記載

### 1.4 バッチ処理のスケジューリング
- **決定済み**: 
  - ✅ **設定方法**: 管理画面上でサービス管理者・サービス管理メンバーが決定できる
  - ✅ **デフォルト実行時間**: 毎日2時（JST）（シグニチャ検証バッチと同じ）
  - ✅ **変更可能**: 実行時間の変更は管理画面から実施可能
  - ✅ **バッチ処理の失敗時のリトライ**:
    - リトライ回数: 5回
    - リトライ間隔: 指数バックオフ方式（5秒から始まり、回数を重ねるごとに倍にする）
      - 1回目: 5秒後
      - 2回目: 10秒後
      - 3回目: 20秒後
      - 4回目: 40秒後
      - 5回目: 80秒後
    - 5回のリトライ後も失敗した場合は、失敗として通知を送信
- **決定が必要**:
  - なし（決定済み）

## 2. セキュリティに関する決定事項

### 2.1 IP AllowList機能の詳細
- **決定済み**: 
  - ✅ **用語統一**: ホワイトリスト/ブラックリスト → AllowList/DenyListに統一
  - ✅ **優先順位**: AllowListが絶対優先される挙動
    - AllowListに登録されているIPからのアクセスは常に許可
    - AllowListに登録されていないIPからのアクセスは拒否（DenyListの設定に関わらず）
  - ✅ **デフォルト動作**: AllowListがない場合は、DenyListのみ適用
  - ✅ **複数IP/CIDRの優先順位**: より具体的な範囲が優先されて適用される
    - 例：100.0.0.0/8 のルールと 100.100.0.0/16 のルールがあれば、100.100.0.0/16 のルールが優先して適用される
  - ✅ **一時的なIP追加機能**: 適用期限の設定を可能とする
    - 管理画面上では相対的な書き方（10分間、1日等）で表示・設定
    - システム上ではdatetime形式で保管
- **決定が必要**:
  - なし（決定済み）

### 2.2 MFAの適用範囲
- **決定済み**: 
  - ✅ **デフォルト**: オプション（ユーザーが任意で有効化可能）
  - ✅ **設定変更**: サービス管理者・サービス管理メンバーが必須/オプションを変更可能
  - ✅ **MFA設定の強制時期**: ログイン実施時に必ず発生とする
    - MFAが必須に設定されている場合、ログイン時にMFA設定を促す
    - MFAが未設定のユーザーは、ログイン後にMFA設定画面にリダイレクトされる
- **決定が必要**:
  - なし（決定済み）

### 2.3 パスワードポリシーの詳細
- **決定済み**: 
  - ✅ **デフォルト**: 8文字以上
  - ✅ **設定変更**: サービス管理者・サービス管理メンバーがパスワードポリシーを設定可能
    - 最小文字数
    - 複雑さ要件（大文字、小文字、数字、記号の組み合わせ）
    - パスワードの有効期限
    - 過去のパスワードの再利用制限
  - ✅ **パスワードポリシー設定画面の詳細UI設計**:
    - **画面レイアウト**:
      - カード形式のセクション分割
      - 各設定項目を明確に分離
      - リアルタイムバリデーション表示
      - 設定プレビュー機能
    - **設定項目のUI要素**:
      1. **最小文字数設定**:
         - 数値入力フィールド（スライダーまたは数値入力）
         - 範囲: 8〜128文字
         - デフォルト: 8文字
         - リアルタイムで現在の設定値を表示
         - 推奨値の表示（8, 12, 16文字）
      2. **複雑さ要件設定**:
         - チェックボックス形式で各要件を個別に有効/無効化可能
         - 大文字（A-Z）を含む必要がある
         - 小文字（a-z）を含む必要がある
         - 数字（0-9）を含む必要がある
         - 記号（!@#$%^&*等）を含む必要がある
         - 各チェックボックスの横に説明文を表示
         - 少なくとも1つの要件を選択する必要がある（バリデーション）
      3. **パスワード有効期限設定**:
         - 有効期限を有効にする/しないのトグルスイッチ
         - 有効期限が有効な場合、日数入力フィールドを表示
         - 範囲: 1〜365日
         - デフォルト: 90日
         - 期限切れ前の警告日数設定（オプション）
         - 期限切れ前の警告日数: 1〜30日（デフォルト: 7日）
      4. **過去のパスワード再利用制限設定**:
         - 再利用制限を有効にする/しないのトグルスイッチ
         - 再利用制限が有効な場合、過去何個のパスワードを記憶するかを設定
         - 範囲: 1〜24個
         - デフォルト: 5個
         - 説明文: 「過去N個のパスワードは再利用できません」
    - **UIの特徴**:
      - 各設定項目にアイコンと説明文を表示
      - 設定変更時に即座にバリデーションを実行
      - エラーメッセージは該当項目の下に赤色で表示
      - 設定のプレビューセクションで、現在の設定を要約表示
      - 保存ボタンとキャンセルボタンを画面下部に配置
      - 保存前に確認ダイアログを表示（設定変更の影響範囲を説明）
      - 保存成功時にトースト通知を表示
    - **アクセシビリティ**:
      - 各入力フィールドに適切なラベルを設定
      - キーボードナビゲーション対応
      - スクリーンリーダー対応
      - エラーメッセージはaria-live属性で読み上げ可能
    - **レスポンシブ対応**:
      - デスクトップ: 2カラムレイアウト
      - タブレット: 1カラムレイアウト
      - モバイル: 1カラムレイアウト、スクロール可能
- **決定が必要**:
  - なし（決定済み）

## 3. 運用に関する決定事項

### 3.1 通知機能の詳細
- **決定済み**: 
  - ✅ **即時性**: 即時通知（イベント発生時に即座に通知）
  - ✅ **通知設定がない場合**: 通知設定が何もないときは通知は稼働しない
  - ✅ **通知の閲覧権限**:
    - サービス管理者・サービス管理メンバー: 全顧客の通知を確認可能
    - 顧客管理者・顧客メンバー: 自社の通知のみ確認可能
  - ✅ **通知の重複防止**: 
    - デフォルト: 10分間（同じイベントの重複通知を防ぐ期間）
    - サービス管理者が管理画面上で設定できる
    - 顧客管理者が自社の設定内に限り設定可能
    - **優先度**: 顧客管理者の設定 ＞ サービス管理者の設定 ＞ デフォルト
  - ✅ **通知の失敗時のリトライ**: 
    - リトライ回数: 5回
    - リトライ間隔: 指数バックオフ方式（5秒から始まり、回数を重ねるごとに倍にする）
      - 1回目: 5秒後
      - 2回目: 10秒後
      - 3回目: 20秒後
      - 4回目: 40秒後
      - 5回目: 80秒後
    - 5回のリトライ後も失敗した場合は、失敗として記録
  - ✅ **通知の優先度**: Critical, Medium, Lowの3段階
    - Critical: 緊急度が高いイベント（攻撃検知、システム障害等）
    - Medium: 重要度が中程度のイベント（警告、注意喚起等）
    - Low: 重要度が低いイベント（情報、統計情報等）
- **決定が必要**:
  - なし（決定済み）

### 3.2 バックアップの詳細
- **決定済み**: 
  - ✅ **実行時間**: デフォルト午前3時（JST）
  - ✅ **設定変更**: サービス管理者・サービス管理メンバーが設定可能
  - ✅ **バックアップの保存先**:
    - **初期実装**: ローカルストレージにバックアップを保存
    - **リモートバックアップ対応**: AWSのAurora、RDSの利用を想定し、設定した時間でSnapshotを取れるAPI連携を準備する
    - **実装方針**:
      - ローカルバックアップを基本機能として実装
      - クラウドデータベース（Aurora、RDS等）向けのSnapshot取得API連携機能を実装
      - 管理画面からバックアップ先の設定を選択可能（ローカル/リモート）
      - リモートバックアップ設定時は、クラウドプロバイダー、リージョン、データベース識別子等の設定が必要
      - Snapshot取得のスケジュール設定を管理画面から実施可能
  - ✅ **バックアップの暗号化の必要性**: 必要
    - ローカルバックアップ、リモートバックアップのいずれも暗号化を実施
    - 暗号化方式はAES-256等の強力な暗号化アルゴリズムを使用
    - 暗号化キーは安全に管理（Key管理システム等を使用）
  - ✅ **バックアップの検証方法**:
    - **ローカルバックアップ**: checksum等のツールで検証を実施
      - バックアップ取得後にchecksumを計算
      - バックアップファイルの整合性を確認
      - 検証結果をログに記録
    - **AWS連携（リモートバックアップ）**: 検証は不要
      - Snapshot取得アクション後に、snapshotが存在していることを確認する
      - Snapshotの存在確認はAWS APIを使用して実施
      - 確認結果をログに記録
- **決定が必要**:
  - なし（決定済み）

### 3.3 ログのアーカイブ詳細
- **決定済み**: 
  - ✅ **アーカイブ先の詳細**: 
    - **転送先がS3の場合**: AWS S3にアーカイブを保存
      - S3バケットの設定が必要
      - リージョン、バケット名、パスプレフィックス等の設定を管理画面から実施可能
      - S3への転送はAWS SDKを使用して実施
    - **転送先がローカルストレージの場合**: ローカルストレージにアーカイブを保存
      - ローカルストレージのパス設定を管理画面から実施可能
      - ストレージ容量の監視が必要
  - ✅ **アーカイブの圧縮形式**: 
    - **S3の場合**: gz形式で圧縮
    - **ローカルの場合**: gz形式で圧縮
    - いずれの転送先でもgzip形式を使用
  - ✅ **アーカイブの暗号化の必要性**: 必要
    - ログには機密情報が含まれる可能性があるため、アーカイブファイルも暗号化を実施
    - 暗号化方式はAES-256等の強力な暗号化アルゴリズムを使用
    - 暗号化キーは安全に管理（Key管理システム等を使用）
  - ✅ **アーカイブからの復元機能の必要性**: 不要
    - アーカイブからの復元機能は実装しない
  - ✅ **アーカイブの実行タイミング**: 
    - **転送方式**: Fluentdで転送するため、リアルタイムでアーカイブ先にも転送される
    - **ファイル分割**: JSTの日が切り替わると、保管ファイルも変わるような仕様とする
    - 日単位でファイルを分割して管理
  - ✅ **アーカイブの検証方法**: 不要
    - アーカイブファイルの検証は実施しない
  - ✅ **アーカイブの保持期間（1年経過後の処理）**: 
    - **S3の場合**: S3のライフサイクルポリシーで設定する
      - 1年経過後の自動削除をS3ライフサイクルポリシーで管理
    - **ローカルの場合**: 1年で削除するようなスクリプトを用意する
      - cronベースで実行するスクリプトを用意
      - 1年経過したアーカイブファイルを自動削除
- **決定が必要な項目**:
  - なし（決定済み）

## 4. パフォーマンスに関する決定事項

### 4.1 キャッシュの詳細
- **決定済み**: 
  - ✅ **キャッシュ対象**: 
    - ユーザーセッション情報（Redis）
    - シグニチャグループ一覧（Redis）
    - 顧客情報（Redis）
    - FQDN設定情報（Redis）
    - シグニチャ情報（Redis）
  - ✅ **キャッシュの無効化戦略**: TTLベース
    - TTL（Time To Live）ベースでキャッシュを無効化
    - 管理画面から設定可能
    - サービス管理者・サービス管理メンバーが設定可能
  - ✅ **各キャッシュのTTL設定（デフォルト値）**:
    - **ユーザーセッション情報**: 30分
    - **シグニチャグループ一覧**: 3時間
    - **顧客情報**: 10分
    - **FQDN設定情報**: 5分
    - **シグニチャ情報**: 5分
    - 各キャッシュのTTLは管理画面から変更可能
  - ✅ **キャッシュのサイズ制限**: 不要
    - キャッシュのサイズ制限は設定しない
  - ✅ **キャッシュの監視・アラート設定**: 
    - **キャッシュの死活確認**: 実施する
      - Redisの接続状態を監視
      - 接続が切断された場合にアラートを送信
    - **応答速度の監視**: 実施する
      - キャッシュへの応答速度を監視
      - 応答に1秒以上かかる場合はアラートを送信
- **決定が必要**:
  - なし（決定済み）

### 4.2 データベース接続プール
- **決定済み**: 
  - ✅ **デフォルト**: 5本の接続プール
  - ✅ **設定方法**: 開発者がconf等の設定ファイルで設定可能
  - ✅ **接続のタイムアウト設定のデフォルト値**: 10秒
  - ✅ **接続の監視・アラート設定**: 
    - 接続本数の監視を行う
    - **利用可能な接続数**がデフォルト値の20%以下（1本以下）になったらアラートを送信
    - 接続プールの枯渇を早期に検知するため
- **決定が必要**:
  - なし（決定済み）

## 5. デプロイメントに関する決定事項

### 5.1 コンテナのリソース制限
- **決定済み**: 
  - ✅ **Dockerfile**: 特にリソース制限は設定しない
  - ✅ **リソース制限**: 利用者の環境（Kubernetes、Docker Compose等）で設定

### 5.2 環境変数・シークレット管理
- **決定済み**: 
  - ✅ **本番環境**: Key管理の仕組みを前提とする（AWSではSSM等）
  - ✅ **ローカル開発環境**: local.conf等のファイルを読み込む
  - ✅ **実装方針**: environment（環境変数）で動作が変わるように設計
    - 本番環境: Key管理システムから取得
    - ローカル環境: 設定ファイルから読み込み

### 5.3 デプロイメント戦略の詳細
- **決定済み**: 
  - ✅ **実装範囲**: Dockerベースでイメージを作成するところまでが開発の範疇
  - ✅ **イメージ管理・デプロイメント**: 利用者の状況に合わせて決定（本開発のスコープ外）
  - ✅ **Dockerイメージのタグ付け戦略**: 
    - **GitHubのcommit ID**: 各ビルドにGitHubのcommit IDをタグとして付与
      - 例: `image:tag-abc1234`（abc1234はcommit IDの短縮形）
    - **最新版**: `latest`タグを付与
      - 最新のビルドには常に`latest`タグも付与する
    - **リリースバージョン**: 特定リリース時からリリースバージョンをタグとして付与
      - 例: `image:v1.0.0`、`image:v1.2.3`等
      - セマンティックバージョニング形式を推奨
- **決定が必要**:
  - なし（決定済み）

## 6. 監視・アラートに関する決定事項

### 6.1 監視メトリクス
- **決定済み**: 
  - ✅ **監視アーキテクチャ**: サイドカー方式（サイドカーに監視の仕組みに合わせた収集機を設置）
  - ✅ **アプリケーション設計**: サイドカーから情報が取得できるように設計
  - ✅ **監視対象**:
    - **WAFエンジン**: 
      - Nginxベースのメトリクス
      - Errorログ（server単位、vhost単位のいずれも）
      - Fluentdのメトリクス
    - **管理画面**: 
      - Nginxベースのメトリクス
      - アプリケーションのメトリクス・ログ
    - **ログ管理サーバ**: 
      - Fluentdのメトリクス
      - ログの監視
  - ✅ **アラートの閾値設定**: 監視機能に任せる（本開発のスコープ外）
    - アラートの閾値設定は使用する監視プラットフォーム側で設定する
  - ✅ **アラートの通知先（メール、Slack等）**: スコープ外
    - アラートの通知先設定は使用する監視プラットフォーム側で設定する
  - ✅ **サイドカーの具体的な実装**: 
    - **実装方針**: 使用する監視プラットフォームで異なる
    - **テンプレート提供**: Prometheus、Datadogを想定したサイドカーのテンプレートを作成しておく
      - Prometheus Exporter形式のサイドカーテンプレート
      - Datadog Agent形式のサイドカーテンプレート
    - **監視項目のタグ（提案）**:
      - **共通タグ**:
        - `component`: コンポーネント名（waf-engine, management-ui, log-server等）
        - `environment`: 環境名（production, staging, development等）
        - `version`: バージョン情報
        - `instance`: インスタンス識別子
      - **WAFエンジン固有タグ**:
        - `fqdn`: FQDN名（該当する場合）
        - `vhost`: バーチャルホスト名（該当する場合）
        - `server`: サーバー名（該当する場合）
      - **管理画面固有タグ**:
        - `service`: サービス名
        - `endpoint`: APIエンドポイント（該当する場合）
      - **ログ管理サーバ固有タグ**:
        - `log_type`: ログタイプ（access, detection, error等）
        - `source`: ログソース（waf-engine, management-ui等）
      - **メトリクス種別タグ**:
        - `metric_type`: メトリクス種別（counter, gauge, histogram等）
        - `unit`: 単位（bytes, requests, seconds等）
- **決定が必要**:
  - なし（決定済み）

### 6.2 ログの監視
- **決定済み**: 
  - ✅ 各コンポーネントのログ監視対象が明確化
  - ✅ **異常なアクセスパターンの検知方法**: 
    - **ローカル環境**: Fluentdで実施
      - Fluentdのプラグインやスクリプトを使用して異常なアクセスパターンを検知
      - 検知結果をSlackに送信するインターフェイスを持つ
      - Slackへの通知設定を管理画面から実施可能
    - **クラウド環境（AWS、Datadog等）**: ログ受け取り先の機能で検知を行う
      - AWS CloudWatch Logs、Datadog等のログ分析機能を使用
      - 異常検知は各プラットフォームの機能に委ねる
      - 本開発ではログを適切な形式で転送することを目的とする
- **決定が必要**:
  - [ ] ログの監視アラート設定

## 7. データベースに関する決定事項

### 7.1 データベースのバージョン・設定
- **決定済み**: 
  - ✅ **データベース**: PostgreSQL → **MySQL（最新バージョン）**に変更
  - ✅ **文字コード**: Unicode/Japanをベース（UTF-8、UTF-8MB4等）
  - ✅ **MySQLの具体的なバージョン**: 8.4系
    - MySQL 8.4系を最新バージョンとして定義
  - ✅ **データベースの初期設定**: 
    - **基本方針**: そこまで大きなDBではないのでデフォルト設定を使用
    - **connections**: 500に設定（初期値）
      - デフォルトの接続数制限を500に設定
      - 負荷試験に基づいて段階的に調整可能
      - メモリ消費を考慮した現実的な値
    - **その他の設定**: innodb_buffer_pool_size等はデフォルト値を使用
  - ✅ **レプリケーションの設定**: 不要
    - データベースのレプリケーションは実装しない
  - ✅ **文字コードの詳細設定**: utf8mb4を使用する
    - localeを含め、utf8mb4を使用する
    - データベースの文字セット、照合順序（collation）をutf8mb4に設定
    - アプリケーション側でもutf8mb4を前提とした実装とする
- **決定が必要**:
  - なし（決定済み）

### 7.2 データベースのマイグレーション
- **決定済み**: 
  - ✅ **マイグレーション戦略**: マイグレーションツールを使用してスキーマ及びその変更を管理
  - ✅ **マイグレーションツールの選定**: Flyway
    - Flywayを使用してデータベースマイグレーションを管理
    - SQLベースのマイグレーションスクリプトを使用
  - ✅ **マイグレーションの実行タイミング**: 
    - **dev環境**: 自動実行
      - 開発環境ではデプロイ時に自動的にマイグレーションを実行
    - **テスト環境**: 全マイグレーションを必ず実施する
      - テスト環境では、デプロイ時に全マイグレーションを必ず実施する
      - テスト環境の整合性を保つため、常に最新のスキーマ状態を維持
    - **本番環境**: デプロイ形式で実施する想定
      - 本番環境では、デプロイ時にマイグレーションを実行する形式を想定
      - 手動実行も可能だが、基本的にはデプロイプロセスに組み込む
  - ✅ **ロールバック時のマイグレーション処理**: 
    - **dev環境、テスト環境**: Flywayの機能に則りロールバックをする
      - Flywayのロールバック機能を使用してマイグレーションをロールバック
      - または、ロールバックを行うSQLをバージョンアップとして実行する
      - ロールバック用のSQLスクリプトをマイグレーションスクリプトとして管理
    - **本番環境**: ケースバイケースでの対応になる
      - 本番環境でのロールバックは、状況に応じて個別に対応する
      - データの整合性や影響範囲を考慮して慎重に判断する
  - ✅ **マイグレーションの実行履歴管理方法**: Flywayの標準機能を使用
    - Flywayは管理DBにて履歴管理を行う
    - `flyway_schema_history`テーブルにマイグレーションの実行履歴が自動的に記録される
    - 追加の実装は不要
- **決定が必要**:
  - なし（決定済み）

## 8. API設計に関する決定事項

### 8.1 APIレート制限
- **決定済み**: 
  - ✅ **APIレート制限**: 特になし（管理APIにはレート制限を設けない）
- **決定が必要**:
  - なし（決定済み）

### 8.2 APIバージョニング
- **決定済み**: 
  - ✅ **バージョニング方式**: APIバージョンはパスに含める形式（例：`/api/v1/...`）
  - ✅ **バージョンアップポリシー**: 破壊的変更が発生しない限り、v1から以降のバージョンは発生しない
  - ✅ **後方互換性**: 後方互換性を維持する設計
- **決定が必要**:
  - なし（決定済み）

## 9. UI/UXに関する決定事項

### 9.1 レスポンシブデザイン
- **決定済み**: 
  - ✅ **モバイル対応の範囲**: モバイル対応は不要
    - モバイル端末（スマートフォン）への対応は実施しない
  - ✅ **タブレット対応の必要性**: 不要
    - タブレット端末への対応は実施しない
    - 管理画面はデスクトップでの利用を想定
  - ✅ **対応する画面サイズの範囲**: スコープ外
    - 対応する画面サイズの範囲の詳細定義は本開発のスコープ外
  - ✅ **各デバイスでの表示優先度**: スコープ外
    - 各デバイスでの表示優先度の詳細定義は本開発のスコープ外
- **決定が必要**:
  - なし（決定済み）

### 9.2 多言語対応
- **決定済み**: 
  - ✅ **多言語対応の必要性**: 必要
  - ✅ **対応言語**: 英語のみ対応（初版）
  - ✅ **デザイン要件**: 英語表記にも耐えられるデザインが必要
    - 長い英語テキストに対応したレイアウト
    - 文字数が多くなることを想定したUI設計
- **決定が必要**:
  - なし（決定済み）

## 10. テストに関する決定事項

### 10.1 テスト戦略
- **決定済み**: 
  - ✅ **テストカバレッジ**:
    - 全体：80%以上
    - 個別モジュール：70%以上
  - ✅ **テスト種類**:
    - ユニットテスト（Unit Test）
    - E2Eテスト（End-to-End Test）
    - Lint（コード品質チェック）
  - ✅ **統合テストの範囲**: ビッグバン型で実施できるスクリプトを用意する
    - 統合テストはビッグバン型（全システムを一度に統合してテスト）で実施する
    - 統合テストを実行するためのスクリプトを用意する
    - スクリプトで統合テストの実行を自動化する
  - ✅ **パフォーマンステストの実施範囲**: WAFエンジンが実装される機能のみ必須
    - WAFエンジンが実装される機能に対してパフォーマンステストを実施する
    - 管理画面やその他のコンポーネントはパフォーマンステストの対象外
- **決定が必要**:
  - なし（決定済み）

### 10.2 テスト環境
- **決定済み**: 
  - ✅ **テスト実行環境**: 
    - Local環境で稼働させるためのスクリプトを用意
    - GitHub Actions上でCIを稼働させる
  - ✅ **テスト環境の構成**: 
    - **開発環境**: Local PCで実施
      - 開発環境はローカルPCで実施する（Dockerを使用するため、OSに依存しない）
      - Linux、macOS、Windows（WSL2）等、Dockerが動作する環境であれば対応可能
      - ローカル環境でテストを実行するためのスクリプトを用意する
    - **CI環境**: GitHub Actionsを利用してCIを構築する
      - GitHub Actions上でCIを構築する
      - ユニットテスト、E2E、Lint、BuildテストはCIで担保する
      - CIで自動的にテストを実行し、品質を保証する
    - **ステージング環境、本番環境**: 利用者の環境に合わせて決定（本開発のスコープ外）
  - ✅ **テストデータの管理方法**: テストコードと共にGitにて管理する
    - テストデータはテストコードと共にGitリポジトリで管理する
    - テストデータのバージョン管理をGitで実施する
    - テストデータの変更履歴を追跡可能にする
  - ✅ **テスト環境のリセット頻度**: 
    - **Local環境**: Dockerベースでテストを実施する。毎回データを投入する
      - ローカル環境ではDockerベースでテストを実施する
      - テスト実行のたびにデータを投入する（毎回クリーンな状態から開始）
    - **CI環境**: Local環境と同様
      - CI環境でもLocal環境と同様に、Dockerベースでテストを実施する
      - テスト実行のたびにデータを投入する
    - **Docker環境の設計**: 
      - Local環境の稼働用、ユニットテスト用、E2E用等でDockerを用意する必要がある場合は、それぞれ異なるdocker-composeを用意する
      - アプリケーション、DBのportをそれぞれずらす設計をする
      - 複数のテスト環境を同時に実行できるようにする
- **決定が必要**:
  - なし（決定済み）

## 11. ドキュメントに関する決定事項

### 11.1 ドキュメントの種類
- **決定済み**: 
  - ✅ **詳細設計書**: モジュール単位で作成
  - ✅ **API仕様書の形式**: OpenAPI + Swaggerベースで実装する
    - OpenAPI（Swagger）形式でAPI仕様書を作成する
    - Swagger UIを使用してAPI仕様書を可視化・閲覧可能にする
    - OpenAPI仕様書からコード生成やドキュメント生成を実施可能にする
  - ✅ **ユーザーマニュアルの作成範囲**: スコープ外
    - ユーザーマニュアルの作成は本開発のスコープ外
  - ✅ **運用マニュアルの作成範囲**: スコープ外
    - 運用マニュアルの作成は本開発のスコープ外
- **決定が必要**:
  - なし（決定済み）

## 12. その他の決定事項

### 12.1 ライセンス・オープンソース
- **決定済み**: 
  - ✅ **初版での考慮**: 一旦考慮しない
  - ✅ **将来的な検討事項**: スコープ外
    - プロジェクトのライセンス、オープンソースライブラリの選定基準、セキュリティ監査の実施範囲に関する将来的な検討事項は本開発のスコープ外
- **決定が必要**:
  - なし（決定済み）

### 12.2 コンプライアンス
- **決定済み**: 
  - ✅ **初版での考慮**: 一旦考慮しない
  - ✅ **将来的な検討事項**: スコープ外
    - 対応が必要なコンプライアンス、データの保存場所の制約、データの暗号化要件に関する将来的な検討事項は本開発のスコープ外
- **決定が必要**:
  - なし（決定済み）

